# PR-10 â€” Multi-tenant isolation E2E (two tenants, same scenario, no leakage)

## Goal
High confidence that tenants are isolated:
- secrets are tenant-scoped
- NATS routing subjects or headers preserve tenant identity
- store/state does not cross-contaminate

## Scope
Single scenario executed twice with tenant A and tenant B.

## Implementation Plan
1) Extend TestEnv with tenant helpers:
   - `env.tenant("a")`, `env.tenant("b")`
   - `install_pack(tenant, pack)`
   - `write_secret(tenant, key, value)`
2) Prepare:
   - tenant A secret value = "A"
   - tenant B secret value = "B"
3) Run same flow input for both tenants.
4) Assert:
   - outputs differ appropriately (reflecting different secret/config)
   - any persisted state keys are tenant-prefixed
   - NATS messages include tenant identity (subject/header/envelope)

## Acceptance Criteria
- No cross-tenant leakage in outputs, artifacts, or store keys.
- Test outputs clearly show tenant separation.
