# PR-05 — Add scenario runner DSL for E2E tests

## Goal
Stop writing bespoke test logic per E2E. Add a tiny DSL that composes steps:
- install pack
- start flow
- send message/event
- await outcome
- assert observed data

## Scope
Implement minimal DSL + runner. Do not add complex scenarios yet.

## Implementation Plan
1) Add types:
   - `Scenario { name, steps }`
   - `enum Step { InstallPack{...}, StartService{...}, HttpPost{...}, NatsPublish{...}, AwaitNats{...}, AssertJson{...} }`
2) Add `ScenarioRunner`:
   - executes steps sequentially
   - records every observation into `target/e2e/<test>/artifacts/observations.jsonl`
3) Implement `AwaitNats` with timeout and simple predicate:
   - “first message on subject”
4) Add test `tests/e2e_scenario_smoke.rs` using DSL to:
   - publish NATS message
   - await it
   - assert equals expected

## Files
- `src/scenario.rs`
- `src/runner.rs`
- `tests/e2e_scenario_smoke.rs`

## Acceptance Criteria
- DSL reduces boilerplate meaningfully.
- Runner emits a readable observations log even on failure.
